<div class="wrap">
  <h1>Categorías</h1>

  <form class="card" (ngSubmit)="guardar()" [formGroup]="form">
    <label>Nombre de la categoría</label>
    <input type="text" [formControl]="nombreCtrl" placeholder="Ej. Electrónica" />
    <div class="hint error" *ngIf="nombreCtrl.touched && nombreCtrl.invalid">Debe ingresar un nombre válido (máx. 100).</div>
    <button class="btn primary" type="submit" [disabled]="loading">Guardar</button>
    <div class="hint success" *ngIf="successMsg">{{ successMsg }}</div>
    <div class="hint error" *ngIf="errorMsg">{{ errorMsg }}</div>
  </form>

  <div class="card">
    <h2>Listado</h2>
    <div *ngIf="loading">Cargando...</div>
    <table *ngIf="!loading && categorias.length">
      <thead><tr><th>ID</th><th>Nombre</th><th>Creado</th></tr></thead>
      <tbody>
        <tr *ngFor="let c of categorias">
          <td>{{ c.id }}</td>
          <td>{{ c.nombre }}</td>
          <td>{{ c.created_at | date:'short' }}</td>
        </tr>
      </tbody>
    </table>
    <div class="hint" *ngIf="!loading && !categorias.length">No hay categorías registradas.</div>
  </div>
</div>
